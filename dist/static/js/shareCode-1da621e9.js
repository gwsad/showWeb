import{Y as j,d as S,r as m,aa as T,B as x,ab as _,ac as M,ad as R,U as V,ae as F,o as $,a8 as P,i as l,af as g,$ as k,a1 as B,M as H,ag as O,X as E,a5 as X,a9 as Y,ah as q,e as A,f as G,s as t,h as u,t as h,E as J,z as f,C as K}from"./index-e9c1660d.js";const[Q,c]=j("image"),W={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:g,height:g,radius:g,lazyLoad:Boolean,iconSize:g,showError:k,errorIcon:B("photo-fail"),iconPrefix:String,showLoading:k,loadingIcon:B("photo")};var Z=S({name:Q,props:W,emits:["load","error"],setup(a,{emit:d,slots:s}){const i=m(!1),n=m(!0),o=m(),{$Lazyload:r}=T().proxy,N=x(()=>{const e={width:_(a.width),height:_(a.height)};return M(a.radius)&&(e.overflow="hidden",e.borderRadius=_(a.radius)),e});R(()=>a.src,()=>{i.value=!1,n.value=!0});const y=e=>{n.value&&(n.value=!1,d("load",e))},w=()=>{const e=new Event("load");Object.defineProperty(e,"target",{value:o.value,enumerable:!0}),y(e)},I=e=>{i.value=!0,n.value=!1,d("error",e)},b=(e,v,C)=>C?C():l(X,{name:e,size:a.iconSize,class:v,classPrefix:a.iconPrefix},null),U=()=>{if(n.value&&a.showLoading)return l("div",{class:c("loading")},[b(a.loadingIcon,c("loading-icon"),s.loading)]);if(i.value&&a.showError)return l("div",{class:c("error")},[b(a.errorIcon,c("error-icon"),s.error)])},D=()=>{if(i.value||!a.src)return;const e={alt:a.alt,class:c("img"),style:{objectFit:a.fit,objectPosition:a.position}};return a.lazyLoad?H(l("img",E({ref:o},e),null),[[O("lazy"),a.src]]):l("img",E({ref:o,src:a.src,onLoad:y,onError:I},e),null)},L=({el:e})=>{const v=()=>{e===o.value&&n.value&&w()};o.value?v():P(v)},z=({el:e})=>{e===o.value&&!i.value&&I()};return r&&V&&(r.$on("loaded",L),r.$on("error",z),F(()=>{r.$off("loaded",L),r.$off("error",z)})),$(()=>{P(()=>{var e;(e=o.value)!=null&&e.complete&&w()})}),()=>{var e;return l("div",{class:c({round:a.round,block:a.block}),style:N.value},[D(),U(),(e=s.default)==null?void 0:e.call(s)])}}});const p=Y(Z),ee="/static/png/share-code-bg-7af99329.png",ae={class:"share__code"},oe={class:"share__code__num"},ne={class:"share__code__body"},te=S({__name:"shareCode",setup(a){const d=x(()=>K().userInfo||{});$(()=>{q().then(n=>{s.value=n.data.count})});const s=m(0),i=n=>{let o=n,r=document.createElement("input");r.value=o,document.body.appendChild(r),r.select(),document.execCommand("Copy"),r.remove(),J({message:f("复制成功"),duration:2e3})};return(n,o)=>(A(),G("div",ae,[l(t(p),{src:t(ee),alt:"",width:"100%",height:"100%"},null,8,["src"]),u("div",oe,h(t(f)(`-目前已经有${s.value}人获得奖励-`)),1),u("div",ne,[u("p",null,h(t(f)("我的邀请码")),1),u("span",null,h(t(f)(t(d).invitationCode)),1),u("div",{onClick:o[0]||(o[0]=r=>i(t(d).invitationCode))},h(t(f)("保存邀请码")),1)])]))}});export{te as default};
