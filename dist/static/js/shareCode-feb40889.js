import{J as U,d as B,r as _,Z as R,s as p,$ as y,a0 as T,a1 as V,E as F,a2 as H,o as N,V as E,g as d,a3 as h,L as P,N as S,y as J,a4 as M,I as x,R as O,W,c as Z,e as q,l as r,f as v,t as f,v as $,z as c}from"./index-95cec1c1.js";import{u as A}from"./user-23d38e5e.js";import{j as G}from"./home-95c8b9fc.js";const[K,m]=U("image"),Q={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:h,height:h,radius:h,lazyLoad:Boolean,iconSize:h,showError:P,errorIcon:S("photo-fail"),iconPrefix:String,showLoading:P,loadingIcon:S("photo")};var X=B({name:K,props:Q,emits:["load","error"],setup(o,{emit:u,slots:i}){const l=_(!1),s=_(!0),a=_(),{$Lazyload:n}=R().proxy,t=p(()=>{const e={width:y(o.width),height:y(o.height)};return T(o.radius)&&(e.overflow="hidden",e.borderRadius=y(o.radius)),e});V(()=>o.src,()=>{l.value=!1,s.value=!0});const C=e=>{s.value&&(s.value=!1,u("load",e))},I=()=>{const e=new Event("load");Object.defineProperty(e,"target",{value:a.value,enumerable:!0}),C(e)},w=e=>{l.value=!0,s.value=!1,u("error",e)},b=(e,g,z)=>z?z():d(O,{name:e,size:o.iconSize,class:g,classPrefix:o.iconPrefix},null),j=()=>{if(s.value&&o.showLoading)return d("div",{class:m("loading")},[b(o.loadingIcon,m("loading-icon"),i.loading)]);if(l.value&&o.showError)return d("div",{class:m("error")},[b(o.errorIcon,m("error-icon"),i.error)])},D=()=>{if(l.value||!o.src)return;const e={alt:o.alt,class:m("img"),style:{objectFit:o.fit,objectPosition:o.position}};return o.lazyLoad?J(d("img",x({ref:a},e),null),[[M("lazy"),o.src]]):d("img",x({ref:a,src:o.src,onLoad:C,onError:w},e),null)},L=({el:e})=>{const g=()=>{e===a.value&&s.value&&I()};a.value?g():E(g)},k=({el:e})=>{e===a.value&&!l.value&&w()};return n&&F&&(n.$on("loaded",L),n.$on("error",k),H(()=>{n.$off("loaded",L),n.$off("error",k)})),N(()=>{E(()=>{var e;(e=a.value)!=null&&e.complete&&I()})}),()=>{var e;return d("div",{class:m({round:o.round,block:o.block}),style:t.value},[D(),j(),(e=i.default)==null?void 0:e.call(i)])}}});const Y=W(X),ee="/static/png/share-code-bg-7af99329.png",oe={class:"share__code"},ae={class:"share__code__num"},ne={class:"share__code__body"},ie=B({__name:"shareCode",setup(o){const u=p(()=>A().userInfo||{});N(()=>{G().then(a=>{i.value=a.data.count})});const i=_(0),l=a=>{let n=a,t=document.createElement("input");t.value=n,document.body.appendChild(t),t.select(),document.execCommand("Copy"),t.remove(),$({message:c("复制成功"),duration:2e3})},s=a=>{let n=`http://hongkongshou.com/register?shareCode=${a}`,t=document.createElement("input");t.value=n,document.body.appendChild(t),t.select(),document.execCommand("Copy"),t.remove(),$({message:c("复制成功"),duration:2e3})};return(a,n)=>(Z(),q("div",oe,[d(r(Y),{src:r(ee),alt:"",width:"100%",height:"100%"},null,8,["src"]),v("div",ae,f(r(c)(`-目前已经有${i.value}人获得奖励-`)),1),v("div",ne,[v("p",null,f(r(c)("我的邀请码")),1),v("span",null,f(r(c)(r(u).invitationCode)),1),v("div",{onClick:n[0]||(n[0]=t=>l(r(u).invitationCode))},f(r(c)("保存邀请码")),1),v("div",{onClick:n[1]||(n[1]=t=>s(r(u).invitationCode))},f(r(c)("分享链接给朋友")),1)])]))}});export{ie as default};
