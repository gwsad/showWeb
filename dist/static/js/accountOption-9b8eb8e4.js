import{d as Z,r as m,o as O,at as M,e as k,f,i as h,w as D,h as i,t as p,s as u,F as U,j as x,v as I,E as S,z as C,u as G,C as L,x as H,au as A,M as j,N as R,av as T,_ as q}from"./index-e9c1660d.js";import{t as J}from"./table-chose-07a74e81.js";import{c as K}from"./choseIcon-f7c3505c.js";import{F as $}from"./index-4919bf6d.js";import{D as P}from"./index-325d1bcb.js";import"./index-464dd9ec.js";import"./use-route-b316dc79.js";import"./Dialog-faceba9b.js";const Q={class:"add__Bank"},W={class:"add__Bank__title"},X={class:"add__Bank__desc"},Y=["onClick"],ee=Z({__name:"addBank",props:["show"],emits:["onCancel","onConfirm"],setup(N,{emit:w}){const s=N,d=m(s.show),e=m({userName:"",bankName:"",bankNum:""}),c=m(null),o=m([]),v=()=>{d.value=!0},B=_=>{if(_&&(!e.value.userName||!e.value.bankName||!e.value.bankNum||c.value===null))return S("请填写完整信息");_&&w("onConfirm",Object.assign(e.value,{bankType:o.value[c.value].name})),!_&&w("onCancel"),c.value=null,e.value={userName:"",bankName:"",bankNum:""}},V=_=>{c.value=_,d.value=!1};return O(async()=>{let _=await M();o.value=_.data}),(_,a)=>(k(),f("div",Q,[h(u(P),{show:s.show,"onUpdate:show":a[4]||(a[4]=l=>s.show=l),showCancelButton:!0,class:"showExample",onCancel:a[5]||(a[5]=l=>B(!1)),onConfirm:a[6]||(a[6]=l=>B(!0))},{default:D(()=>[i("div",W,p(u(C)("添加银行卡")),1),i("div",X,p(u(C)("只能填写银行卡账号")),1),i("div",{class:"add__Bank__picker",onClick:a[0]||(a[0]=l=>v())},p(u(C)(o.value[c.value]===void 0?"请选择":o.value[c.value].name)),1),i("div",{class:I(["add__Bank__chose",{"add__Bank__chose-show":!d.value}])},[(k(!0),f(U,null,x(o.value,(l,b)=>(k(),f("div",{key:b,onClick:g=>V(b)},p(u(C)(l.name)),9,Y))),128))],2),h(u($),{modelValue:e.value.userName,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value.userName=l),placeholder:"请输入持卡人姓名"},null,8,["modelValue"]),h(u($),{modelValue:e.value.bankName,"onUpdate:modelValue":a[2]||(a[2]=l=>e.value.bankName=l),placeholder:"请输入银行卡卡号"},null,8,["modelValue"]),h(u($),{modelValue:e.value.bankNum,"onUpdate:modelValue":a[3]||(a[3]=l=>e.value.bankNum=l),placeholder:"请输入银行开户行"},null,8,["modelValue"])]),_:1},8,["show"])]))}});const ae={class:"add__Bank"},ne={class:"add__Bank__title"},oe=["onClick"],se=Z({__name:"addUsdt",props:["show"],emits:["onCancel","onConfirm"],setup(N,{emit:w}){const s=N,d=m(s.show),e=m({usdtType:"",usdtNum:""}),c=m(null),o=m([{text:"trc20",value:0},{text:"erc20",value:1}]),v=()=>{d.value=!0},B=_=>{if(_&&(!e.value.usdtNum||c.value===null))return S("请填写完整信息");_&&w("onConfirm",Object.assign({type:c.value===0?"trc20":"erc20"},e.value)),!_&&w("onCancel"),c.value=null,e.value={usdtType:"",usdtNum:""}},V=_=>{c.value=_,d.value=!1};return O(()=>{}),(_,a)=>(k(),f("div",ae,[h(u(P),{show:s.show,"onUpdate:show":a[2]||(a[2]=l=>s.show=l),showCancelButton:!0,class:"showExample",onCancel:a[3]||(a[3]=l=>B(!1)),onConfirm:a[4]||(a[4]=l=>B(!0))},{default:D(()=>[i("div",ne,p(u(C)("添加USDT账户")),1),i("div",{class:"add__Bank__picker",onClick:a[0]||(a[0]=l=>v())},p(u(C)(o.value[c.value]===void 0?"请选择":o.value[c.value].text)),1),i("div",{class:I(["add__Bank__chose",{"add__Bank__chose-show":!d.value}])},[(k(!0),f(U,null,x(o.value,(l,b)=>(k(),f("div",{key:b,onClick:g=>V(l.value)},p(u(C)(l.text)),9,oe))),128))],2),h(u($),{modelValue:e.value.usdtNum,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value.usdtNum=l),placeholder:"请输入地址"},null,8,["modelValue"])]),_:1},8,["show"])]))}});const le={class:"add__Bank"},te={class:"add__Bank__title"},ue=Z({__name:"addZFB",props:["show"],emits:["onCancel","onConfirm"],setup(N,{emit:w}){const s=N,d=m({ZFBAccount:"",ZFBName:""}),e=c=>{if(c&&(!d.value.ZFBAccount||!d.value.ZFBAccount))return S("请填写完整信息");c&&w("onConfirm",d.value),!c&&w("onCancel"),d.value={ZFBAccount:"",ZFBName:""}};return O(()=>{}),(c,o)=>(k(),f("div",le,[h(u(P),{show:s.show,"onUpdate:show":o[2]||(o[2]=v=>s.show=v),showCancelButton:!0,class:"showExample",onCancel:o[3]||(o[3]=v=>e(!1)),onConfirm:o[4]||(o[4]=v=>e(!0))},{default:D(()=>[i("div",te,p(u(C)("添加支付宝账户")),1),h(u($),{modelValue:d.value.ZFBName,"onUpdate:modelValue":o[0]||(o[0]=v=>d.value.ZFBName=v),placeholder:"请输入支付宝姓名"},null,8,["modelValue"]),h(u($),{modelValue:d.value.ZFBAccount,"onUpdate:modelValue":o[1]||(o[1]=v=>d.value.ZFBAccount=v),placeholder:"请输入支付宝账户"},null,8,["modelValue"])]),_:1},8,["show"])]))}});const de={class:"coupons option"},ce={class:"coupons__tab"},re=["onClick"],ve=["src"],ie={class:"option__body"},_e=["onClick"],me={class:"common-btn"},pe={class:"common-btn special-btn"},ke=["onClick"],fe=["onClick"],Ce=Z({__name:"accountOption",setup(N){const w=G(),s=m(1),d=m(!1),e=m(null),c=m([{name:"USDT账户",value:1},{name:"银行卡账户",value:2},{name:"支付宝账户",value:3}]),o=m([]),v=m({});O(async()=>{F()});const B=(n,t)=>{s.value=n,F()},V=()=>{L().setCashInfo(Object.assign(v.value[e.value],{type:s.value===1?"USDT":s.value===2?"银行卡":"支付宝"})),w.go(-1)},_=()=>{s.value===1&&g(v.value[e.value],0),s.value===2&&b(v.value[e.value],0),s.value===3&&E(v.value[e.value],0)},a=n=>{d.value=n},l=n=>{e.value===n?e.value=null:e.value=n},b=async(n,t=1)=>{const r={card:n.bankName||n.card,bank:n.bankType||n.bank,username:n.userName||n.username,openingBank:n.bankNum||n.openingBank,status:t};try{await T({bankCard:r}),F(),e.value=null}catch{}a(!1)},g=async(n,t=1)=>{const r={name:n.type||n.name,address:n.usdtNum||n.address,status:t};try{await T({usdt:r}),F(),e.value=null}catch{}a(!1)},E=async(n,t=1)=>{const r={account:n.ZFBAccount||n.account,accountName:n.ZFBName||n.accountName,status:t};try{await T({aliPay:r}),F(),e.value=null}catch{}a(!1)},F=async()=>{o.value=[];const n=await L().handleGetUserInfo();s.value===1&&(v.value=n.cashAccount.usdt,n.cashAccount.usdt.map(t=>{o.value.push({name:t.name,value:t.address})})),s.value===2&&(v.value=n.cashAccount.bankCard,n.cashAccount.bankCard.map(t=>{o.value.push({name:t.card,value:t.bank})})),s.value===3&&(v.value=n.cashAccount.aliPay,n.cashAccount.aliPay.map(t=>{o.value.push({name:t.accountName,value:t.account})}))};return(n,t)=>(k(),f("div",de,[i("div",ce,[(k(!0),f(U,null,x(c.value,(r,y)=>(k(),f("div",{class:"coupons__tab__item",key:y,onClick:z=>B(r.value,r._id)},[i("div",{class:I({"tab-chose":s.value===r.value})},p(u(C)(r.name)),3),s.value===r.value?(k(),f("img",{key:0,src:u(J),alt:""},null,8,ve)):H("",!0)],8,re))),128))]),i("div",ie,[(k(!0),f(U,null,x(o.value,(r,y)=>(k(),f("div",{class:"option__body__item",key:r.name+r.value,onClick:A(z=>l(y),["stop"])},[i("div",null,[i("div",null,p(u(C)(r.name+"")),1),i("div",null,p(r.value),1)]),h(K,{value:y===e.value},null,8,["value"])],8,_e))),128))]),j(i("div",me,[i("div",{onClick:t[0]||(t[0]=r=>a(!0))},p(u(C)("添加账户")),1)],512),[[R,e.value===null]]),j(i("div",pe,[i("div",{onClick:A(V,["stop"])},p(u(C)("确认选择")),9,ke),i("div",{onClick:A(_,["stop"])},p(u(C)("删除")),9,fe)],512),[[R,e.value!==null]]),h(se,{show:d.value&&s.value===1,onOnConfirm:g,onOnCancel:t[1]||(t[1]=r=>a(!1))},null,8,["show"]),h(ee,{show:d.value&&s.value===2,onOnConfirm:b,onOnCancel:t[2]||(t[2]=r=>a(!1))},null,8,["show"]),h(ue,{show:d.value&&s.value===3,onOnConfirm:E,onOnCancel:t[3]||(t[3]=r=>a(!1))},null,8,["show"])]))}});const Fe=q(Ce,[["__scopeId","data-v-3b99fce2"]]);export{Fe as default};
