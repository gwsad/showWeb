import{r as $,o as j,a8 as z,aw as G,ad as J,ax as V,ay as W,az as X,i as a,Y as S,d as k,aj as Z,$ as A,a9 as I,T as O,a1 as w,af as L,aA as Q,a5 as p,aB as ee,a7 as ne,am as te,C as H,ak as oe,Z as ae,aC as le,a2 as ie,aD as ce,X as se,a3 as re,ab as de,a4 as ue,aE as fe,aF as F,aG as ge,aH as me,aI as Be,aJ as he}from"./index-4a539bd9.js";import{r as U,u as M}from"./use-route-cf1e60f1.js";const be=(e,s)=>{const t=$(),l=()=>{t.value=X(e).height};return j(()=>{if(z(l),s)for(let i=1;i<=3;i++)setTimeout(l,100*i)}),G(()=>z(l)),J([V,W],l),t};function ve(e,s){const t=be(e,!0);return l=>a("div",{class:s("placeholder"),style:{height:t.value?`${t.value}px`:void 0}},[l()])}const[q,N]=S("action-bar"),Y=Symbol(q),ye={placeholder:Boolean,safeAreaInsetBottom:A};var we=k({name:q,props:ye,setup(e,{slots:s}){const t=$(),l=ve(t,N),{linkChildren:i}=Z(Y);i();const f=()=>{var B;return a("div",{ref:t,class:[N(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(B=s.default)==null?void 0:B.call(s)])};return()=>e.placeholder?l(f):f()}});const Ce=I(we),[xe,y]=S("button"),Se=O({},U,{tag:w("button"),text:String,icon:String,type:w("default"),size:w("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:w("button"),loadingSize:L,loadingText:String,loadingType:String,iconPosition:w("left")});var ke=k({name:xe,props:Se,emits:["click"],setup(e,{emit:s,slots:t}){const l=M(),i=()=>t.loading?t.loading():a(ne,{size:e.loadingSize,type:e.loadingType,class:y("loading")},null),f=()=>{if(e.loading)return i();if(t.icon)return a("div",{class:y("icon")},[t.icon()]);if(e.icon)return a(p,{name:e.icon,class:y("icon"),classPrefix:e.iconPrefix},null)},B=()=>{let o;if(e.loading?o=e.loadingText:o=t.default?t.default():e.text,o)return a("span",{class:y("text")},[o])},r=()=>{const{color:o,plain:h}=e;if(o){const g={color:h?o:"white"};return h||(g.background=o),o.includes("gradient")?g.border=0:g.borderColor=o,g}},b=o=>{e.loading?ee(o):e.disabled||(s("click",o),l())};return()=>{const{tag:o,type:h,size:g,block:C,round:P,plain:T,square:R,loading:_,disabled:n,hairline:c,nativeType:m,iconPosition:d}=e,v=[y([h,g,{plain:T,block:C,round:P,square:R,loading:_,disabled:n,hairline:c}]),{[Q]:c}];return a(o,{type:m,class:v,style:r(),disabled:n,onClick:b},{default:()=>[a("div",{class:y("content")},[d==="left"&&f(),B(),d==="right"&&f()])]})}}});const E=I(ke),[Pe,Te]=S("action-bar-button"),Re=O({},U,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var _e=k({name:Pe,props:Re,setup(e,{slots:s}){const t=M(),{parent:l,index:i}=te(Y),f=H(()=>{if(l){const r=l.children[i.value-1];return!(r&&"isButton"in r)}}),B=H(()=>{if(l){const r=l.children[i.value+1];return!(r&&"isButton"in r)}});return oe({isButton:!0}),()=>{const{type:r,icon:b,text:o,color:h,loading:g,disabled:C}=e;return a(E,{class:Te([r,{last:B.value,first:f.value}]),size:"large",type:r,icon:b,color:h,loading:g,disabled:C,onClick:t},{default:()=>[s.default?s.default():o]})}}});const K=I(_e),[De,u,x]=S("dialog"),Ae=O({},ae,{title:String,theme:String,width:L,message:[String,Function],callback:Function,allowHtml:Boolean,className:le,transition:w("van-dialog-bounce"),messageAlign:String,closeOnPopstate:A,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:A,closeOnClickOverlay:Boolean}),Ee=[...ie,"transition","closeOnPopstate"];var Oe=k({name:De,props:Ae,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:s,slots:t}){const l=$(),i=ce({confirm:!1,cancel:!1}),f=n=>s("update:show",n),B=n=>{var c;f(!1),(c=e.callback)==null||c.call(e,n)},r=n=>()=>{e.show&&(s(n),e.beforeClose?(i[n]=!0,he(e.beforeClose,{args:[n],done(){B(n),i[n]=!1},canceled(){i[n]=!1}})):B(n))},b=r("cancel"),o=r("confirm"),h=fe(n=>{var c,m;if(n.target!==((m=(c=l.value)==null?void 0:c.popupRef)==null?void 0:m.value))return;({Enter:e.showConfirmButton?o:F,Escape:e.showCancelButton?b:F})[n.key](),s("keydown",n)},["enter","esc"]),g=()=>{const n=t.title?t.title():e.title;if(n)return a("div",{class:u("header",{isolated:!e.message&&!t.default})},[n])},C=n=>{const{message:c,allowHtml:m,messageAlign:d}=e,v=u("message",{"has-title":n,[d]:d}),D=ge(c)?c():c;return m&&typeof D=="string"?a("div",{class:v,innerHTML:D},null):a("div",{class:v},[D])},P=()=>{if(t.default)return a("div",{class:u("content")},[t.default()]);const{title:n,message:c,allowHtml:m}=e;if(c){const d=!!(n||t.title);return a("div",{key:m?1:0,class:u("content",{isolated:!d})},[C(d)])}},T=()=>a("div",{class:[Be,u("footer")]},[e.showCancelButton&&a(E,{size:"large",text:e.cancelButtonText||x("cancel"),class:u("cancel"),style:{color:e.cancelButtonColor},loading:i.cancel,disabled:e.cancelButtonDisabled,onClick:b},null),e.showConfirmButton&&a(E,{size:"large",text:e.confirmButtonText||x("confirm"),class:[u("confirm"),{[me]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:i.confirm,disabled:e.confirmButtonDisabled,onClick:o},null)]),R=()=>a(Ce,{class:u("footer")},{default:()=>[e.showCancelButton&&a(K,{type:"warning",text:e.cancelButtonText||x("cancel"),class:u("cancel"),color:e.cancelButtonColor,loading:i.cancel,disabled:e.cancelButtonDisabled,onClick:b},null),e.showConfirmButton&&a(K,{type:"danger",text:e.confirmButtonText||x("confirm"),class:u("confirm"),color:e.confirmButtonColor,loading:i.confirm,disabled:e.confirmButtonDisabled,onClick:o},null)]}),_=()=>t.footer?t.footer():e.theme==="round-button"?R():T();return()=>{const{width:n,title:c,theme:m,message:d,className:v}=e;return a(ue,se({ref:l,role:"dialog",class:[u([m]),v],style:{width:de(n)},tabindex:0,"aria-labelledby":c||d,onKeydown:h,"onUpdate:show":f},re(e,Ee)),{default:()=>[g(),P(),_()]})}}});export{Oe as s};
