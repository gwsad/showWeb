import{X as U,d as $,r as _,a9 as j,B as p,aa as y,ab as R,ac as V,T as F,ad as H,o as D,a7 as P,i as d,ae as h,Z as S,a0 as x,L as M,af as O,W as B,a4 as W,a8 as X,ag as Z,e as q,f as A,s as r,h as v,t as f,D as E,z as c}from"./index-ab8829a0.js";import{u as G}from"./user-0747f5c3.js";const[J,m]=U("image"),K={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:h,height:h,radius:h,lazyLoad:Boolean,iconSize:h,showError:S,errorIcon:x("photo-fail"),iconPrefix:String,showLoading:S,loadingIcon:x("photo")};var Q=$({name:J,props:K,emits:["load","error"],setup(o,{emit:u,slots:i}){const l=_(!1),s=_(!0),a=_(),{$Lazyload:n}=j().proxy,t=p(()=>{const e={width:y(o.width),height:y(o.height)};return R(o.radius)&&(e.overflow="hidden",e.borderRadius=y(o.radius)),e});V(()=>o.src,()=>{l.value=!1,s.value=!0});const C=e=>{s.value&&(s.value=!1,u("load",e))},w=()=>{const e=new Event("load");Object.defineProperty(e,"target",{value:a.value,enumerable:!0}),C(e)},I=e=>{l.value=!0,s.value=!1,u("error",e)},b=(e,g,z)=>z?z():d(W,{name:e,size:o.iconSize,class:g,classPrefix:o.iconPrefix},null),N=()=>{if(s.value&&o.showLoading)return d("div",{class:m("loading")},[b(o.loadingIcon,m("loading-icon"),i.loading)]);if(l.value&&o.showError)return d("div",{class:m("error")},[b(o.errorIcon,m("error-icon"),i.error)])},T=()=>{if(l.value||!o.src)return;const e={alt:o.alt,class:m("img"),style:{objectFit:o.fit,objectPosition:o.position}};return o.lazyLoad?M(d("img",B({ref:a},e),null),[[O("lazy"),o.src]]):d("img",B({ref:a,src:o.src,onLoad:C,onError:I},e),null)},L=({el:e})=>{const g=()=>{e===a.value&&s.value&&w()};a.value?g():P(g)},k=({el:e})=>{e===a.value&&!l.value&&I()};return n&&F&&(n.$on("loaded",L),n.$on("error",k),H(()=>{n.$off("loaded",L),n.$off("error",k)})),D(()=>{P(()=>{var e;(e=a.value)!=null&&e.complete&&w()})}),()=>{var e;return d("div",{class:m({round:o.round,block:o.block}),style:t.value},[T(),N(),(e=i.default)==null?void 0:e.call(i)])}}});const Y=X(Q),ee="/static/png/share-code-bg-7af99329.png",oe={class:"share__code"},ae={class:"share__code__num"},ne={class:"share__code__body"},se=$({__name:"shareCode",setup(o){const u=p(()=>G().userInfo||{});D(()=>{Z().then(a=>{i.value=a.data.count})});const i=_(0),l=a=>{let n=a,t=document.createElement("input");t.value=n,document.body.appendChild(t),t.select(),document.execCommand("Copy"),t.remove(),E({message:c("复制成功"),duration:2e3})},s=a=>{let n=`http://hongkongshou.com/register?shareCode=${a}`,t=document.createElement("input");t.value=n,document.body.appendChild(t),t.select(),document.execCommand("Copy"),t.remove(),E({message:c("复制成功"),duration:2e3})};return(a,n)=>(q(),A("div",oe,[d(r(Y),{src:r(ee),alt:"",width:"100%",height:"100%"},null,8,["src"]),v("div",ae,f(r(c)(`-目前已经有${i.value}人获得奖励-`)),1),v("div",ne,[v("p",null,f(r(c)("我的邀请码")),1),v("span",null,f(r(c)(r(u).invitationCode)),1),v("div",{onClick:n[0]||(n[0]=t=>l(r(u).invitationCode))},f(r(c)("保存邀请码")),1),v("div",{onClick:n[1]||(n[1]=t=>s(r(u).invitationCode))},f(r(c)("分享链接给朋友")),1)])]))}});export{se as default};
