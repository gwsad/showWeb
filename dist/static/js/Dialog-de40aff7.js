import{r as A,o as W,V as z,ae as j,a1 as J,af as Q,ag as Y,ah as p,g as a,J as S,d as P,a5 as G,L as O,W as E,D as I,N as w,a3 as L,ai as X,R as Z,aj as ee,U as ne,a8 as te,s as H,a6 as oe,K as ae,ak as le,O as ie,al as ce,I as se,P as re,$ as ue,Q as de,am as fe,an as N,ao as ge,ap as me,aq as Be,ar as he}from"./index-5bd8ae9e.js";import{r as U,u as q}from"./use-route-f4c8513a.js";const be=(e,s)=>{const t=A(),l=()=>{t.value=p(e).height};return W(()=>{if(z(l),s)for(let i=1;i<=3;i++)setTimeout(l,100*i)}),j(()=>z(l)),J([Q,Y],l),t};function ve(e,s){const t=be(e,!0);return l=>a("div",{class:s("placeholder"),style:{height:t.value?`${t.value}px`:void 0}},[l()])}const[M,K]=S("action-bar"),V=Symbol(M),ye={placeholder:Boolean,safeAreaInsetBottom:O};var we=P({name:M,props:ye,setup(e,{slots:s}){const t=A(),l=ve(t,K),{linkChildren:i}=G(V);i();const f=()=>{var B;return a("div",{ref:t,class:[K(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(B=s.default)==null?void 0:B.call(s)])};return()=>e.placeholder?l(f):f()}});const Ce=E(we),[xe,y]=S("button"),Se=I({},U,{tag:w("button"),text:String,icon:String,type:w("default"),size:w("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:w("button"),loadingSize:L,loadingText:String,loadingType:String,iconPosition:w("left")});var Pe=P({name:xe,props:Se,emits:["click"],setup(e,{emit:s,slots:t}){const l=q(),i=()=>t.loading?t.loading():a(ne,{size:e.loadingSize,type:e.loadingType,class:y("loading")},null),f=()=>{if(e.loading)return i();if(t.icon)return a("div",{class:y("icon")},[t.icon()]);if(e.icon)return a(Z,{name:e.icon,class:y("icon"),classPrefix:e.iconPrefix},null)},B=()=>{let o;if(e.loading?o=e.loadingText:o=t.default?t.default():e.text,o)return a("span",{class:y("text")},[o])},r=()=>{const{color:o,plain:h}=e;if(o){const g={color:h?o:"white"};return h||(g.background=o),o.includes("gradient")?g.border=0:g.borderColor=o,g}},b=o=>{e.loading?ee(o):e.disabled||(s("click",o),l())};return()=>{const{tag:o,type:h,size:g,block:C,round:k,plain:T,square:R,loading:_,disabled:n,hairline:c,nativeType:m,iconPosition:u}=e,v=[y([h,g,{plain:T,block:C,round:k,square:R,loading:_,disabled:n,hairline:c}]),{[X]:c}];return a(o,{type:m,class:v,style:r(),disabled:n,onClick:b},{default:()=>[a("div",{class:y("content")},[u==="left"&&f(),B(),u==="right"&&f()])]})}}});const $=E(Pe),[ke,Te]=S("action-bar-button"),Re=I({},U,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var _e=P({name:ke,props:Re,setup(e,{slots:s}){const t=q(),{parent:l,index:i}=te(V),f=H(()=>{if(l){const r=l.children[i.value-1];return!(r&&"isButton"in r)}}),B=H(()=>{if(l){const r=l.children[i.value+1];return!(r&&"isButton"in r)}});return oe({isButton:!0}),()=>{const{type:r,icon:b,text:o,color:h,loading:g,disabled:C}=e;return a($,{class:Te([r,{last:B.value,first:f.value}]),size:"large",type:r,icon:b,color:h,loading:g,disabled:C,onClick:t},{default:()=>[s.default?s.default():o]})}}});const F=E(_e),[De,d,x]=S("dialog"),Oe=I({},ae,{title:String,theme:String,width:L,message:[String,Function],callback:Function,allowHtml:Boolean,className:le,transition:w("van-dialog-bounce"),messageAlign:String,closeOnPopstate:O,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:O,closeOnClickOverlay:Boolean}),$e=[...ie,"transition","closeOnPopstate"];var Ie=P({name:De,props:Oe,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:s,slots:t}){const l=A(),i=ce({confirm:!1,cancel:!1}),f=n=>s("update:show",n),B=n=>{var c;f(!1),(c=e.callback)==null||c.call(e,n)},r=n=>()=>{e.show&&(s(n),e.beforeClose?(i[n]=!0,he(e.beforeClose,{args:[n],done(){B(n),i[n]=!1},canceled(){i[n]=!1}})):B(n))},b=r("cancel"),o=r("confirm"),h=fe(n=>{var c,m;if(n.target!==((m=(c=l.value)==null?void 0:c.popupRef)==null?void 0:m.value))return;({Enter:e.showConfirmButton?o:N,Escape:e.showCancelButton?b:N})[n.key](),s("keydown",n)},["enter","esc"]),g=()=>{const n=t.title?t.title():e.title;if(n)return a("div",{class:d("header",{isolated:!e.message&&!t.default})},[n])},C=n=>{const{message:c,allowHtml:m,messageAlign:u}=e,v=d("message",{"has-title":n,[u]:u}),D=ge(c)?c():c;return m&&typeof D=="string"?a("div",{class:v,innerHTML:D},null):a("div",{class:v},[D])},k=()=>{if(t.default)return a("div",{class:d("content")},[t.default()]);const{title:n,message:c,allowHtml:m}=e;if(c){const u=!!(n||t.title);return a("div",{key:m?1:0,class:d("content",{isolated:!u})},[C(u)])}},T=()=>a("div",{class:[Be,d("footer")]},[e.showCancelButton&&a($,{size:"large",text:e.cancelButtonText||x("cancel"),class:d("cancel"),style:{color:e.cancelButtonColor},loading:i.cancel,disabled:e.cancelButtonDisabled,onClick:b},null),e.showConfirmButton&&a($,{size:"large",text:e.confirmButtonText||x("confirm"),class:[d("confirm"),{[me]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:i.confirm,disabled:e.confirmButtonDisabled,onClick:o},null)]),R=()=>a(Ce,{class:d("footer")},{default:()=>[e.showCancelButton&&a(F,{type:"warning",text:e.cancelButtonText||x("cancel"),class:d("cancel"),color:e.cancelButtonColor,loading:i.cancel,disabled:e.cancelButtonDisabled,onClick:b},null),e.showConfirmButton&&a(F,{type:"danger",text:e.confirmButtonText||x("confirm"),class:d("confirm"),color:e.confirmButtonColor,loading:i.confirm,disabled:e.confirmButtonDisabled,onClick:o},null)]}),_=()=>t.footer?t.footer():e.theme==="round-button"?R():T();return()=>{const{width:n,title:c,theme:m,message:u,className:v}=e;return a(de,se({ref:l,role:"dialog",class:[d([m]),v],style:{width:ue(n)},tabindex:0,"aria-labelledby":c||u,onKeydown:h,"onUpdate:show":f},re(e,$e)),{default:()=>[g(),k(),_()]})}}});export{Ie as s};
